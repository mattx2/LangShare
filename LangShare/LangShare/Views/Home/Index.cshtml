@{
    ViewBag.Title = "Welcome to LangShare!";
}

@section scripts {
    <script src="../../Scripts/jquery-2.2.0.min.js"></script>
    <script src="../../Scripts/jquery.signalR-2.2.0.min.js"></script>
    <script src="../../Scripts/knockout-3.4.0.debug.js"></script>
    <script src="~/signalr/hubs"></script>
    <script src="~/Scripts/apps/chat.js"></script>
}

<h2><center>Welcome to LangShare</center></h2>



<script type="text/javascript">

    /*

    $('#sendBtn').click(function () {

        $("#scroller").append('#messages');

        $('#scroller').animate({ scrollTop: $('#scroller').prop("scrollHeight") }, 300);

    });

    */


    /*
    function getMessagesClick() {       
        var div = $("#messages");
        
        div.scrollTop(div.prop('scrollHeight'));
    }

    function getMessagesEnter() {
        var $msgTxt = $('#txtMsg');
        $msgTxt.keypress(function (e) {
            var code = (e.keyCode ? e.keyCode : e.which);
            if (code === 13) {
                var div = $("#messages");
                div.scrollTop(div.prop('scrollHeight'));
            }
        });
    }
*/

</script>




<style type="text/css">

#scroller 
{
    overflow:   auto;
    overflow-y: auto;
    margin-top: 8.5px;
    position:   relative;
    width:      70%;
    height:     400px;
    border: 2px solid #3A87AD;
    overflow-y: scroll;
    background-color: #f8f8f8;
    float: left;
    display: block;
}

#userlist
{
    overflow:   auto;
    float: right;
    width: 29%;
    height:     200px;
    border: 2px solid #3A87AD;
    border-radius: 5px;
    overflow-y: scroll;
    margin:0px;
    padding:5px;

}




#messages
{
    overflow-y: hidden;
    overflow-x: hidden;
    position:   relative;
    bottom:     auto;
    width:      100%;
    background-color: #dff0d8;
    

}

#messages div 
{
    border:.5px solid #99bdce;
    border-radius: 5px;
    margin:0px;
    padding:5px;
}

ul 
{
    margin: 0;
}

ul li 
{
    padding: 0;
    list-style-type: none;
}

#users li 
{
    border: 1px solid #99bdce;
    padding: 4px;
    border-radius: 3px;
    margin-bottom: 1px;
    cursor: pointer;
    margin-right: 50px;
    padding: 50px;

}

.privateChatUser 
{
    background-color: #3A87AD;
}

#txtMsg 
{
    float: left;
    width: 84%;
}

#btnSend
{
    float: right;
    width: 15%;

}




</style>



<div class="alert alert-success">
    Welcome @User.Identity.Name! Let's start sharing...
</div>

<div data-bind="visible: isInPrivateChat" class="alert alert-info">
    You are in a private chat with @@<span data-bind="text: privateChatUser"></span>! <a href="#" data-bind="click: exitFromPrivateChat">Exit from private chat?</a>
</div>

<div class="row-fluid">
    <div class="span8 form-search">
        <input type="text" id="txtMsg" class="input-xxlarge" disabled="disabled" onkeydown="getMessagesEnter()"/> 
        <button type="button" id="btnSend" class="btn btn-info" disabled="disabled" onclick="getMessagesClick()">Send</button>       
    </div>





    <div id="scroller" class="left">

                 <div id="messages" data-bind="foreach: messages">
                    <div>
                    <span class="label label-important" data-bind="visible: isPrivate">Private</span>
                    <strong><span data-bind="text: from"></span>: </strong>
                    <span data-bind="text: message"></span>



                    </div>
                </div>
            </div>

     <div id="userlist" class="right">

             <div id="users" class="span2">
                <ul data-bind="foreach: users">
                <li data-bind="click: setAsPrivateChat, css: { privateChatUser: isPrivateChatUser }">
                <span data-bind="text: name"></span>
            </li>
        </ul>
    </div>

                    </div>

