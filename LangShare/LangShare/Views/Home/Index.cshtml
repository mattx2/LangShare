@{
    ViewBag.Title = "Welcome to LangShare!";
}

@section scripts {
    <script src="../../Scripts/jquery-2.2.0.min.js"></script>
    <script src="../../Scripts/jquery.signalR-2.2.0.min.js"></script>
    <script src="../../Scripts/knockout-3.4.0.debug.js"></script>
    <script src="~/signalr/hubs"></script>
    <script src="~/Scripts/apps/chat.js"></script>
}

<h2><center>Welcome to LangShare</center></h2>



<script type="text/javascript">
/*
    function getMessagesClick() {       
        var div = $("#messages");
        
        div.scrollTop(div.prop('scrollHeight'));
    }

    function getMessagesEnter() {
        var $msgTxt = $('#txtMsg');
        $msgTxt.keypress(function (e) {
            var code = (e.keyCode ? e.keyCode : e.which);
            if (code === 13) {
                var div = $("#messages");
                div.scrollTop(div.prop('scrollHeight'));
            }
        });
    }
*/
</script>




<style type="text/css">

#scroller 
{
    overflow:   auto;
    position:   relative;
    width:      100%;
    height:     200px;
    border: 1px solid #ccc;
}

#messages
{
    overflow-y:  scroll;
    overflow-x: hidden;
    position:   absolute;
    bottom:     auto;
    width:      100%;
    max-height: 150px;
}

#messages div 
{
    border:1px solid #e2e4e3;
    border-radius: 5px;
    margin:5px;
    padding:10px;
}

ul 
{
    margin: 0;
}

ul li 
{
    padding: 0;
    list-style-type: none;
}

#users li 
{
    border: 1px solid #EEE;
    padding: 4px;
    border-radius: 3px;
    margin-bottom: 1px;
    cursor: pointer;
    margin-left: 0px;
}

.privateChatUser 
{
    background-color: #3A87AD;
}

#txtMsg 
{
    width: 500px;
    margin-left: 0px;
}

</style>



<div class="alert alert-success">
    Hello @User.Identity.Name! Start chatting...
</div>

<div data-bind="visible: isInPrivateChat" class="alert alert-info">
    You are in a private chat with @@<span data-bind="text: privateChatUser"></span>! <a href="#" data-bind="click: exitFromPrivateChat">Exit from private chat?</a>
</div>

<div class="row-fluid">
    <div class="span8 form-search">
        <input type="text" id="txtMsg" class="input-xxlarge" disabled="disabled" onkeydown="getMessagesEnter()"/> 
        <button type="button" id="btnSend" class="btn btn-info" disabled="disabled" onclick="getMessagesClick()">Send</button>       
    </div>

    <div id="users" class="span2">

        <ul data-bind="foreach: users">
            <li data-bind="click: setAsPrivateChat, css: { privateChatUser: isPrivateChatUser }">
                <span data-bind="text: name"></span>
            </li>
        </ul>
    </div>
                 <div id="scroller" data-bind="foreach: messages">
                    <div>
                    <span class="label label-important" data-bind="visible: isPrivate">Private</span>
                    <strong><span data-bind="text: from"></span>: </strong>
                    <span data-bind="text: message"></span>
                    </div>
                </div>
            </div>
      
